{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PatientLogin(){const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const[showPassword,setShowPassword]=useState(false);const navigate=useNavigate();useEffect(()=>{const params=new URLSearchParams(window.location.search);const emailFromQR=params.get(\"email\");if(emailFromQR){setEmail(emailFromQR);}},[]);const handleLogin=async e=>{e.preventDefault();setLoading(true);setError(\"\");try{const response=await fetch(`https://${process.env.REACT_APP_SERVER_IP}/api/auth/patient-login`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,password})});const data=await response.json();if(!response.ok){throw new Error(data.error||\"Login failed\");}localStorage.setItem(\"token\",data.token);navigate(\"/patient-dashboard\");// Redirect to patient dashboard\n}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-indigo-600 flex flex-col items-center justify-center relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-[800px] h-[800px] rounded-full border-[60px] border-indigo-500/30\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-lg w-full max-w-md z-10 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Hospital Logo\",className:\"w-20 h-20 mb-4\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-indigo-600 text-xl font-medium mb-8\",children:\"Patient Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-4\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"w-full space-y-6\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"ID\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full border-b border-gray-300 py-2 focus:outline-none focus:border-indigo-600\",required:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full border-b border-gray-300 py-2 focus:outline-none focus:border-indigo-600 pr-10\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute right-2 top-2 text-gray-500\",onMouseDown:()=>setShowPassword(true),onMouseUp:()=>setShowPassword(false),onMouseLeave:()=>setShowPassword(false),onTouchStart:()=>setShowPassword(true)// Mobile support\n,onTouchEnd:()=>setShowPassword(false)// Mobile support\n,children:showPassword?/*#__PURE__*/// Eye Open (Visible)\n_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:2,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M12 4.5c-5.8 0-10.5 4.5-10.5 7s4.7 7 10.5 7 10.5-4.5 10.5-7-4.7-7-10.5-7zm0 3c2.2 0 4 1.8 4 4s-1.8 4-4 4-4-1.8-4-4 1.8-4 4-4z\"})}):/*#__PURE__*/// Eye Closed (Hidden)\n_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:2,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M3 12s3.5-7 9-7 9 7 9 7-3.5 7-9 7-9-7-9-7zm9-3c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3zm-6.5 0L3 12m6 6l8.5-8.5m-3.5 3.5L21 12\"})})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-indigo-600 text-white py-3 uppercase font-medium hover:bg-indigo-700 transition\",disabled:loading,children:loading?\"Logging in...\":\"Login\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-white text-center mt-8 max-w-md px-4 z-10\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\xA9 2025 Comprehensive System for Managing Patient Data\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:\"Access your medical records securely.\"})]})]});}","map":{"version":3,"names":["useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","PatientLogin","email","setEmail","password","setPassword","error","setError","loading","setLoading","showPassword","setShowPassword","navigate","params","URLSearchParams","window","location","search","emailFromQR","get","handleLogin","e","preventDefault","response","fetch","process","env","REACT_APP_SERVER_IP","method","headers","body","JSON","stringify","data","json","ok","Error","localStorage","setItem","token","err","message","className","children","src","alt","onSubmit","type","placeholder","value","onChange","target","required","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","disabled"],"sources":["D:/Comprehensive System for Managing Patient Data/Comprehensive System for Managing Patient Data/frontend/src/pages/PatientLogin.js"],"sourcesContent":["import { useState,useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function PatientLogin() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  \r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const emailFromQR = params.get(\"email\");\r\n\r\n    if (emailFromQR) {\r\n      setEmail(emailFromQR);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const response = await fetch(`https://${process.env.REACT_APP_SERVER_IP}/api/auth/patient-login`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || \"Login failed\");\r\n      }\r\n\r\n      localStorage.setItem(\"token\", data.token);\r\n      navigate(\"/patient-dashboard\"); // Redirect to patient dashboard\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-indigo-600 flex flex-col items-center justify-center relative overflow-hidden\">\r\n      {/* Background Circular Gradient - Using a slightly different blue than the receptionist */}\r\n      <div className=\"absolute inset-0 flex items-center justify-center\">\r\n        <div className=\"w-[800px] h-[800px] rounded-full border-[60px] border-indigo-500/30\"></div>\r\n      </div>\r\n\r\n      {/* Login Card */}\r\n      <div className=\"bg-white p-8 rounded-lg shadow-lg w-full max-w-md z-10 flex flex-col items-center\">\r\n        {/* Logo */}\r\n        <img src=\"/logo.png\" alt=\"Hospital Logo\" className=\"w-20 h-20 mb-4\" />\r\n\r\n        <h1 className=\"text-indigo-600 text-xl font-medium mb-8\">Patient Login</h1>\r\n\r\n        {/* Error Message */}\r\n        {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n\r\n        {/* Login Form */}\r\n        <form className=\"w-full space-y-6\" onSubmit={handleLogin}>\r\n          <div>\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"ID\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              className=\"w-full border-b border-gray-300 py-2 focus:outline-none focus:border-indigo-600\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"relative\">\r\n              <input\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full border-b border-gray-300 py-2 focus:outline-none focus:border-indigo-600 pr-10\"\r\n                required\r\n              />\r\n              \r\n              {/* Eye Icon for Showing Password */}\r\n              <button\r\n                type=\"button\"\r\n                className=\"absolute right-2 top-2 text-gray-500\"\r\n                onMouseDown={() => setShowPassword(true)}\r\n                onMouseUp={() => setShowPassword(false)}\r\n                onMouseLeave={() => setShowPassword(false)}\r\n                onTouchStart={() => setShowPassword(true)}  // Mobile support\r\n                onTouchEnd={() => setShowPassword(false)}  // Mobile support\r\n              >\r\n                {showPassword ? (\r\n                  // Eye Open (Visible)\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    strokeWidth={2}\r\n                    stroke=\"currentColor\"\r\n                    className=\"w-6 h-6\"\r\n                  >\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5c-5.8 0-10.5 4.5-10.5 7s4.7 7 10.5 7 10.5-4.5 10.5-7-4.7-7-10.5-7zm0 3c2.2 0 4 1.8 4 4s-1.8 4-4 4-4-1.8-4-4 1.8-4 4-4z\" />\r\n                  </svg>\r\n                ) : (\r\n                  // Eye Closed (Hidden)\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    strokeWidth={2}\r\n                    stroke=\"currentColor\"\r\n                    className=\"w-6 h-6\"\r\n                  >\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 12s3.5-7 9-7 9 7 9 7-3.5 7-9 7-9-7-9-7zm9-3c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3zm-6.5 0L3 12m6 6l8.5-8.5m-3.5 3.5L21 12\" />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full bg-indigo-600 text-white py-3 uppercase font-medium hover:bg-indigo-700 transition\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Logging in...\" : \"Login\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"text-white text-center mt-8 max-w-md px-4 z-10\">\r\n        <p className=\"text-sm\">© 2025 Comprehensive System for Managing Patient Data</p>\r\n        <p className=\"text-sm mt-1\">\r\n          Access your medical records securely.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}